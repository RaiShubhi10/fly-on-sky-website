'use strict';function _utf8_decode(a){let b="",c=0;for(;c<a.length;){let g=a.charCodeAt(c);if(128>g)b+=String.fromCharCode(g),c++;else if(191<g&&224>g){var e=a.charCodeAt(c+1);b+=String.fromCharCode((g&31)<<6|e&63);c+=2}else{e=a.charCodeAt(c+1);let h=a.charCodeAt(c+2);b+=String.fromCharCode((g&15)<<12|(e&63)<<6|h&63);c+=3}}return b}
function decode(a){let b="";let c,e,g,h=0;for(a=a.replace(/[^A-Za-z0-9\+\/=]/g,"");h<a.length;){var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(h++));var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(h++));e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(h++));g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(h++));m=m<<2|l>>4;l=
(l&15)<<4|e>>2;c=(e&3)<<6|g;b+=String.fromCharCode(m);64!==e&&(b+=String.fromCharCode(l));64!==g&&(b+=String.fromCharCode(c))}return b=_utf8_decode(b)}
function getDeviceType(){const a="ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,b=600>=window.innerWidth&&a,c=navigator.userAgent;if(600<window.innerWidth&&1024>=window.innerWidth&&a){if(/(tablet|ipad|macintosh|playbook|silk)|(android(?!.*mobile))|(linux(?!.*mobile))/i.test(c))return"Tablet"}else if(b){if(/mobile|ip(hone|od)|android|blackberry|iemobile|silk|linux/i.test(c))return"Mobile"}else return"Desktop"}
const breadcrumb=document.querySelectorAll(".breadcrumb span"),breadcrumbData=Array.from(breadcrumb).map(a=>a.innerHTML).join("-"),pageTitle=document.title,pageNameData="Book \x26 Manage",lang=document.documentElement.lang,currentPageURL=window.location.href,adobeUrlParams=new URLSearchParams(window.location.search),utm_medium=adobeUrlParams.get("utm_medium")||"",utm_source=adobeUrlParams.get("utm_source")||"",utm_campaign=adobeUrlParams.get("utm_campaign")||"",utm_term=adobeUrlParams.get("utm_term")||
"",utm_content=adobeUrlParams.get("utm_content")||"",urlParamsValue=[utm_medium?"utm_medium\x3d"+utm_medium:"",utm_source?"utm_source\x3d"+utm_source:"",utm_campaign?"utm_campaign\x3d"+utm_campaign:"",utm_term?"utm_term\x3d"+utm_term:"",utm_content?"utm_content\x3d"+utm_content:""].filter(a=>""!==a).join("\x26"),targetData={event:"pageLoaded",_airindia:{pageName:pageTitle,pageURL:currentPageURL,siteSection:pageNameData,siteSubSection:pageTitle,pageType:"AEM Page",siteName:"AirIndia Website",language:lang,
market:"",deviceType:getDeviceType()},web:{webPageDetails:{URL:currentPageURL,name:pageTitle,server:document.location.hostname,siteSection:pageNameData,pageViews:{value:1}}},marketing:{trackingCode:urlParamsValue}},isSigninRequested=null!==window.sessionStorage.getItem("isSigninRequested"),ltyMd=window.sessionStorage.getItem("lty-md"),adobeDataLayerExists=void 0!==window.adobeDataLayer;
if(isSigninRequested&&ltyMd){const a=JSON.parse(decode(ltyMd)),b=decode(window.sessionStorage.getItem("lty-memTier")),c={id:a.membershipId,status:"authenticated",membershipTier:b};adobeDataLayerExists&&(targetData._airindia.userInfo=c,window.adobeDataLayer.push(targetData))}else adobeDataLayerExists&&window.adobeDataLayer.push(targetData);function findUpTag(a,b){for(;a&&a.tagName!==b;)a=a.parentNode;return a}
function targetClick(a){let b=a.target;if(a.target.parentElement&&a.target.parentElement.classList&&!a.target.parentElement.classList.contains("copy-link-container")){a=b.innerText;var c=b?.name?b?.name:b?.innerText;a={event:"Click",_airindia:{pageName:pageTitle,pageURL:currentPageURL,siteSection:pageNameData,siteSubSection:pageTitle,pageType:"AEM Page",siteName:"AirIndia Website",language:lang,market:"",deviceType:getDeviceType(),clickInfo:{clickName:a,clickComponentType:"a"==b?.localName?"URL":
"Button",componentName:c,componentID:b?.id}},web:{webInteractions:{linkClicks:{value:1},name:a?a.replace(/(<([^>]+)>)/gi,"").replaceAll("\n"," ").trim():"",type:"other",URL:b.href?b.href:""}}};if(null!==window.sessionStorage.getItem("lyt-ud")){c=JSON.parse(decode(JSON.stringify(window.sessionStorage.getItem("lty-md"))));var e=decode(window.sessionStorage.getItem("lty-memTier"));targetData._airindia.userInfo={id:c.membershipId,status:"authenticated",membershipTier:e}}var g=b.closest("#headerhome1");
e=b.closest(".galItem");var h=b.closest(".prepare_to_travel_card_item"),m=b.closest(".footer"),l=b.closest(".flyNonStopDestinationSlider"),r=b.closest(".twitterFeed");c=b.closest(".bannerMain");var k=b.closest(".bannerLoyalty"),n=b.closest("li"),p=b.closest(".bannerUpcomingTrip"),q=b.closest("#giftPagePopup");if(e||h||g||m||l||r||c||k||p||q)if(e&&"a"===b.localName){var d=e.querySelector("h3").textContent.trim();k=e.querySelector("h4").textContent.trim();c=e.querySelector(".primarybtn1").childNodes[0].nodeValue.trim();
a._airindia.clickInfo.clickName=c;a._airindia.clickInfo.componentName=c;a._airindia.clickInfo.bannerName=d;a._airindia.clickInfo.bannerDescription=k;a._airindia.clickInfo.clickLocation="Others";a._airindia.clickInfo.clickComponentType="Banner";a.web.webInteractions.name=c;pushDataTarget(a)}else if(h&&"img"===b.localName){d=h.querySelector(".ai-card-body h3").innerText;k=h.querySelector(".ai-card-body p").innerText;var f=b.parentElement.href;a._airindia.clickInfo.clickName=d;a.web.webInteractions.URL=
f;a._airindia.clickInfo.bannerName=d;a._airindia.clickInfo.bannerDescription=k;a._airindia.clickInfo.clickLocation="Others";a._airindia.clickInfo.clickComponentType="Banner";a.web.webInteractions.name=d;pushDataTarget(a)}else if(!g||"a"!==b.localName&&"img"!==b.localName&&"li"!==b.localName&&"button"!==b.localName)!m||"a"!==b.localName&&"img"!==b.localName?l&&"a"==b.localName?(a._airindia.clickInfo.clickComponentType="Banner",a._airindia.clickInfo.clickLocation="Others",b.classList.contains("ai-FlyNonStop-button-wrapper")&&
(a.web.webInteractions.URL=b.href,d=l.querySelector(".ai-fylNon-stop-heading"),a._airindia.clickInfo.bannerName=d.querySelector("h1").innerHTML,d=l.querySelector(".ai-fylNon-stop-content p"),a._airindia.clickInfo.bannerDescription=d.innerHTML),b.classList.contains("ai-book-now_wrapper")&&(a.web.webInteractions.URL=b.href,d=b.closest(".ai-carousel-text"),a._airindia.clickInfo.bannerName=d.querySelector("h2").innerHTML),pushDataTarget(a)):b.className&&"string"==typeof b.className&&(b.className.includes("tweet")||
b.className.includes("twitter"))?(d=b.innerText.replace(/[\n]/gm,""),a.web.webInteractions.name=d,a._airindia.clickInfo.clickDescription=d,a._airindia.clickInfo.clickName="Twitter Card",a._airindia.clickInfo.componentName="Twitter Card",a._airindia.clickInfo.clickLocation="Others",pushDataTarget(a)):"tweet-text-paragraph"==b.parentNode?.className?(d=b.innerText.replace(/[\n]/gm,""),a._airindia.clickInfo.clickDescription=d,a.web.webInteractions.name=d,a._airindia.clickInfo.clickName="Twitter Card",
a._airindia.clickInfo.componentName="Twitter Card",a._airindia.clickInfo.clickLocation="Others",pushDataTarget(a)):"twitter-share-title"==b.parentNode?.className?(a._airindia.clickInfo.clickName="Airindia X handle",a._airindia.clickInfo.clickLocation="Others",pushDataTarget(a)):b.closest(".image-posts")||b.closest(".video-posts")||b.closest(".poll-posts")?(d=b.closest(".twitter-card-content").querySelector(".tweet-text-paragraph").innerText.replace(/[\n]/gm,""),a._airindia.clickInfo.clickDescription=
d,a.web.webInteractions.name=d,a._airindia.clickInfo.clickName="Twitter Card",a._airindia.clickInfo.componentName="Twitter Card",a._airindia.clickInfo.clickLocation="Others",pushDataTarget(a)):c&&b.className.includes("primarybtn")?(a._airindia.clickInfo.clickComponentType="Banner",a._airindia.clickInfo.clickLocation="Header-Banner",d=c.querySelector(".impression-banner"),d=d.innerHTML.replace(/<[^>]*>/g,"").replace(/<br>/g," ").replace(/\n/g,"").trim(),f=c.querySelector(".promotionDescription"),e=
f.innerHTML.replace(/<[^>]*>/g,"").replace(/<br>/g," ").replace(/\n/g,"").trim(),c=c.querySelector(".primarybtn").childNodes[0].nodeValue.trim(),f=b.href?b.href:currentPageURL,a._airindia.clickInfo.clickName=c,a._airindia.clickInfo.componentName=c,a._airindia.clickInfo.componentName=c,a._airindia.clickInfo.bannerName=d,a._airindia.clickInfo.bannerDescription=e,a.web.webInteractions.URL=f,a.web.webInteractions.name=c,pushDataTarget(a)):k&&b.className.includes("primarybtn")?(a._airindia.clickInfo.clickComponentType=
"Banner",a._airindia.clickInfo.clickLocation="Header-Banner",d=k.querySelector(".impression-banner"),d=d.innerHTML.replace(/<[^>]*>/g,"").replace(/<br>/g," ").replace(/\n/g,"").trim(),f=isSigninRequested&&ltyMd?k.querySelector("p.withLogin"):k.querySelector("p.withoutLogin"),e=f.innerHTML,a._airindia.clickInfo.bannerName=d,a._airindia.clickInfo.bannerDescription=e,a.web.webInteractions.URL=b.href,pushDataTarget(a)):k&&n?(d=n.querySelector(".loyaltyCardItem .cardCont h3").innerHTML,f=n.querySelector(".loyaltyCardItem .cardCont p").innerHTML,
f=d.replace(/<br\s*\/?>/g,"").replace(/\n/g," ")+" "+f.replace(/<[^>]*>/g,"").replace(/<br\s*\/?>/g,"").replace(/\n/g," "),a._airindia.clickInfo.clickName=f,a._airindia.clickInfo.componentName=f,a._airindia.clickInfo.clickComponentType="URL",a.web.webInteractions.URL=n.querySelector("a").getAttribute("href"),a.web.webInteractions.name="",pushDataTarget(a)):p&&b.className.includes("primarybtn")?(a._airindia.clickInfo.clickName="Upcoming Trip",a._airindia.clickInfo.componentName=f,a._airindia.clickInfo.clickComponentType=
"URL",pushDataTarget(a)):q&&"popup-button-confirm"===b.className?(d=b.parentElement.getAttribute("href"),a._airindia.clickInfo.componentID="giftcards",a._airindia.clickInfo.componentName="GIFT CARDS",a.web.webInteractions.URL=d,a.web.webInteractions.name="Qwikcilver",a.web.webInteractions.type="exit",pushDataTarget(a)):console.log("Element not found."):(d=b.closest(".ai-footer-column")?.querySelector(".ai-dropdown-header h2")?.innerText.trim(),"img"===b.localName&&(f=b.getAttribute("alt"),a._airindia.clickInfo.clickName=
f,a.web.webInteractions.name=f,a._airindia.clickInfo.clickIcon=f,b=b.parentElement),f=b.href?b.href:currentPageURL,a.web.webInteractions.URL=f,a._airindia.clickInfo.clickLocation="Footer",a._airindia.clickInfo.clickComponentType="URL",d&&(a._airindia.clickInfo.menuName=d),pushDataTarget(a));else{(f=b.closest(".menu-with-submenu"))&&(f=f.querySelector('[id^\x3d"headernav"]'))&&(d=f.innerText.trim());"li"===b.localName?(f=b.querySelector("a"))&&(b=f):"img"===b.localName&&(a._airindia.clickInfo.clickName=
b.getAttribute("alt"),b=b.parentElement);if("topMenulogoLight"==b.id||"topMenulogoDark"==b.id)return;/^header\d*Image\d*link\d*$/.test(b.id)&&(f=b.querySelector("img"),a._airindia.clickInfo.clickName=f.getAttribute("alt"),a.web.webInteractions.name=f.getAttribute("alt"));/^headernav\d*menu\d*$/.test(b.id)?a._airindia.clickInfo.depthNumber=0:/^header\d*menu\d*link\d*$/.test(b.id)&&(a._airindia.clickInfo.depthNumber=1);f=b.href?b.href:currentPageURL;a.web.webInteractions.URL=f;a._airindia.clickInfo.componentID=
b?.id;a._airindia.clickInfo.clickLocation="Header";a._airindia.clickInfo.clickComponentType="URL";null!==d&&void 0!==d&&(a._airindia.clickInfo.menuName=d);"gift-icon"===b.id&&(a._airindia.clickInfo.menuName="topMenu1submenu1");pushDataTarget(a)}}b.closest("BUTTON"===b.tagName)&&bannerImpressionOnslide()}var bannerTraversedList=[];document.addEventListener("DOMContentLoaded",function(){bannerImpressionOnslide();$("#revampcarousel").on("changed.owl.carousel",function(a){bannerImpressionOnslide()})});
function bannerImpressionOnslide(){var a=document.querySelector(".carousalBanner");if(a){var b=a.querySelector(".owl-item.animated.owl-animated-in.fadeIn.active");null===b&&(b=document.querySelector(".owl-item.active"))}var c;b&&(c=b.querySelector(".impression-banner"));c&&(b=c.innerHTML.replace(/<[^>]*>|<\/p>|<br\s*\/?>/gi," ").replace(/\n/g,"").trim(),a={event:"impression",_airindia:{pageURL:window.location.href,pageName:document.title,siteSection:pageNameData,siteSubSection:document.title,pageType:"AEM Page",
siteName:"AirIndia Website",language:document.documentElement.lang,impressionType:"Header-Banner",impressionDetails:b,deviceType:getDeviceType()}},bannerTraversedList.includes(b)||(pushDataTarget(a),bannerTraversedList.push(b)))}function isClassInViewport(a,b){const c=new IntersectionObserver(e=>{e.forEach(g=>{g.isIntersecting&&(c.disconnect(),b(!0))})},{once:!0});(a=document.querySelector("."+a))?c.observe(a):b(!1)}
let impressionDataTemplate={event:"impression",_airindia:{pageName:document.title,pageURL:window.location.href,siteSection:pageNameData,siteSubSection:document.title,pageType:"AEM Page",siteName:"AirIndia Website",language:document.documentElement.lang,market:"",deviceType:getDeviceType()}},scrollList=new Set;
const impressionDataLayer=[{className:"galTitleBtn",impressionType:"BTF-Banner",impressionDetails:"A CLASS APART. IT\u2019S THE NEW STANDARD"},{className:"prepareToTravel-side-container-content",impressionType:"BTF-Banner",impressionDetails:"PREPARE TO TRAVEL"},{className:"ai-fylNon-stop-heading",impressionType:"BTF-Banner",impressionDetails:"FLY NONSTOP"},{className:"footer",impressionType:"Footer",impressionDetails:"Footer-Mega menu"},{className:"ai-footer-column-img",impressionType:"Footer",impressionDetails:"Download AI App Icons"},
{className:"ai-footer-socials",impressionType:"Footer",impressionDetails:"Social Media Icons"},{className:"ai-footer-icons",impressionType:"Footer",impressionDetails:"Tata logo"}];impressionDataLayer.forEach(({className:a,impressionType:b,impressionDetails:c})=>{scrollList.has(a)||isClassInViewport(a,function(e){e&&(e=deepCopy(impressionDataTemplate),e._airindia.impressionType=b,e._airindia.impressionDetails=c,pushDataTarget(e),scrollList.add(a))})});document.addEventListener("click",a=>{targetClick(a)});
function signOutEventHandler(a){token=a.detail.token;tier=a.detail.tier;a=getTargetData("Logout","Logout");if(null!==token&&null!==tier){var b=JSON.parse(decode(JSON.stringify(token)));let c=decode(tier);b=b.membershipId;a.event="userSignedOut";a._airindia.userInfo={id:b,tier:c};a._airindia.clickInfo.clickComponentType="Button"}pushDataTarget(a);window.removeEventListener("signedOutUserDetails",signOutEventHandler)}window.addEventListener("signedOutUserDetails",signOutEventHandler);
function pushDataTarget(a){window.adobeDataLayer&&window.adobeDataLayer.push(a)}function deepCopy(a){if(null===a||"object"!==typeof a)return a;let b=a.constructor();for(let c in a)a.hasOwnProperty(c)&&(b[c]=deepCopy(a[c]));return b}
function getTargetData(a,b){return{event:"",_airindia:{pageName:document.title,pageURL:window.location.href,siteSection:pageNameData,siteSubSection:document.title,pageType:"AEM Page",siteName:"AirIndia Website",language:document.documentElement.lang,market:"",deviceType:getDeviceType(),clickInfo:{clickName:a,clickComponentType:"",componentName:b,componentID:""}},web:{webInteractions:{linkClicks:{value:1},name:a,type:"other",URL:""}}}}
async function sendSignInEvent(a,b,c,e){a={event:c,_airindia:{pageName:e,pageURL:a,siteName:"Loyalty",language:"en",signInMethod:"sms"===b?"Mobile OTP":"Email OTP",deviceType:getDeviceType(),siteSection:pageNameData,siteSubSection:document.title,pageType:"AEM Page"},web:{webInteractions:{linkClicks:{value:1},name:"signInStart",type:"other"}}};b={errorType:"apiError",errorMessage:"SignIn Error",errorCode:400};"error"==c&&(a._airindia={...a._airindia,...b});window.adobeDataLayer.push(a)};